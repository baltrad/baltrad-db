== Requirements ==

Note that the version numbers supplied here are those
used in developing the library, you might get away with
lower version numbers in some cases.

for building:
* python 2.4+

library dependencies:
* HLHDF library                 0.7.7
* boost::filesystem             1.42
* boost::foreach                1.42
* boost::iterator               1.42
* boost::lexical_cast           1.42
* boost::mpl                    1.42
* boost::multi_index            1.42
* boost::program_options        1.42
* boost::ptr_container		1.42
* boost::smart_ptr              1.42
* boost::spirit			1.42
* boost::sting_algo             1.42
* boost::thread                 1.42
* boost::timer                  1.42
* boost::utility                1.42
* boost::uuid                   1.43    (included in ./src)
* boost::variant                1.42
* boost::xpressive              1.42
* libpqxx                       3.1
* libfuse                       2.7.x   (optional)
* utf8-cpp                      2.3     (included in ./src)

additional test dependencies:
* gtest                         1.4.0
* gmock                         1.4.0

run time dependencies:
* postgresql                    8.3

documentation generation dependencies:
* doxygen


== generating documentation ==

 If you have doxygen installed, the following command generates the
 documentation under ./doc

 $ ./waf doc


== building ==

first step is to configure the build system. You get a list of available
configuration variables with

 $ ./waf --help

You should probably specify installation prefix (the default is '/usr/local')
and paths for any libraries you have installed somewhere other than '/usr'.

The default configuration builds baltrad-db library, swig wrappers for java
and unit tests.

Just to give an example:

 $ ./waf configure --build_java=yes \
                   --build_tests=yes \
                   --prefix=/opt \
                   --hlhdf_dir=/opt/hlhdflib \
                   --boost_dir=/opt/boost1.40 \
                   --jdk_dir=/usr/lib/jvm/java-6-openjdk \
                   --ant=/opt/ant/bin/ant \
                   --swig=/opt/swig/bin/swig \
                   --test_db_dsn=postgresql://baltrad:baltrad@localhost/baltrad 
 $ ./waf build

as can be seen from the dependencies, boost libraries are heavily used, so the
build times can be quite long.

== running unit tests ==

unit tests can be run with:

$ ./waf test

The build system has to be configured with '--build_tests=true'. If building
java wrappers is enabled, unit tests written in java are also executed.
To be able to run all tests, you should also define at least one database dsn
with '--test_db_dsn='.

Running tests rebuilds all targets not up-to-date and is essentially
equivalent to a build step, with the addition that unit tests are run
in the end.


== installing ==

If all is in order, feel free to install the library:

 $ ./waf install

To actually be of any use, you should also create a database. Table creation
statements can be found in schema/postgresql/create.sql. Just feed the file
to the database and you should be set to go.

 $ createdb baltrad
 $ psql < ./schema/postgresql/create.sql
